<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <title>还款管理</title>
    <!--    <link th:href="@{/favicon.ico}" rel="shortcut icosn"/>-->
    <link th:href="@{/css/font-awesome.min.css}" rel="stylesheet"/>

    <link href="/css/main/bootstrap.min14ed.css" th:href="@{/css/main/bootstrap.min14ed.css}"
          rel="stylesheet"/>
    <link th:href="@{/css/nucleo.css}" rel="stylesheet"/>
    <link type="text/css" href="/css/argon.css?v=1.0.0" th:href="@{/css/argon.css}"
          rel="stylesheet">
    <!--<link type="text/css" href="/argon/argonchange.css?v=1.0.0" th:href="@{/argon/argonchange.css}" rel="stylesheet">-->
    <link th:href="@{/ruoyi/css/ry-ui.css}" rel="stylesheet"/>
    <link href="/ajax/libs/bootstrap-table/bootstrap-table.min.css"
          th:href="@{/ajax/libs/bootstrap-table/bootstrap-table.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/toastr.min.css}" rel="stylesheet"/>
    <style>td {
        vertical-align: middle !important;
    }</style>
    <!-- Core -->
    <script src="/js/jquery.min.js" th:src="@{/js/jquery.min.js}"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>
    <!--JQueryVali-->
    <script src="/ajax/libs/validate/jquery.validate.min.js"
            th:src="@{/ajax/libs/validate/jquery.validate.min.js}"></script>
    <script src="/ajax/libs/validate/messages_zh.min.js"
            th:src="@{/ajax/libs/validate/messages_zh.min.js}"></script>
    <script src="/ajax/libs/validate/jquery.validate.extend.js"
            th:src="@{/ajax/libs/validate/jquery.validate.extend.js}"></script>
    <script src="/vendor/popper/popper.min.js" th:src="@{/vendor/popper/popper.min.js}"></script>
    <script src="/vendor/headroom/headroom.min.js"
            th:src="@{/vendor/headroom/headroom.min.js}"></script>
    <!-- Argon JS -->
    <script src="/js/argon.js?v=1.0.0" th:src="@{/js/argon.js}"></script>
    <script src="/js/piexif.js" th:src="@{/js/piexif.js}"></script>
    <script src="/js/toastr.min.js" th:src="@{/js/toastr.min.js}"></script>
    <!-- bootstrap-table 表格插件 -->
    <script src="/ajax/libs/bootstrap-table/bootstrap-table.min.js"
            th:src="@{/ajax/libs/bootstrap-table/bootstrap-table.min.js}"></script>
    <script src="/ajax/libs/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"
            th:src="@{/ajax/libs/bootstrap-table/locale/bootstrap-table-zh-CN.min.js}"></script>
    <script src="/ajax/libs/bootstrap-table/extensions/mobile/bootstrap-table-mobile.js"
            th:src="@{/ajax/libs/bootstrap-table/extensions/mobile/bootstrap-table-mobile.js}"></script>
    <script src="/ajax/libs/bootstrap-table/extensions/toolbar/bootstrap-table-toolbar.min.js"
            th:src="@{/ajax/libs/bootstrap-table/extensions/toolbar/bootstrap-table-toolbar.min.js}"></script>
    <script src="/ajax/libs/bootstrap-table/extensions/columns/bootstrap-table-fixed-columns.js"
            th:src="@{/ajax/libs/bootstrap-table/extensions/columns/bootstrap-table-fixed-columns.js}"></script>
    <script src="/ajax/libs/layer/layer.min.js" th:src="@{/ajax/libs/layer/layer.min.js}"></script>
    <script src="/ruoyi/js/ry-ui.js?v=3.4.0" th:src="@{/ruoyi/js/ry-ui.js}"></script>
    <script src="/js/toastr.min.js" th:src="@{/js/toastr.min.js}"></script>
    <script src="/extra/js/tools.js" th:src="@{/extra/js/tools.js}"></script>

    <th:block th:include="include :: bootstrap-fileinput-js"/>
    <style>
        .menu-item {
            font-size: 14px;
            color: #ffffff;
            width: 16%;
            padding: 10px;
            margin-right: 30px;
        }

        .menu-item:hover {
            color: #16181b;
            background-color: #f6f9fc;
            border-radius: 2px;
        }
    </style>
</head>

<body>
<!--<div style="position: fixed; left: 0; top: 0; width: 100%; height: 100%;">-->
<div style="position: fixed; left: 0; top: 0; width: 100%; height: 100%; overflow-y: auto; display: flex; flex-direction: column;">
    <header class="header-global">
        <nav id="navbar-main"
             class="navbar navbar-main navbar-expand-lg navbar-transparent navbar-light">
            <div class="container">
                <a class="navbar-brand mr-lg-5" href="/">
                    <img src="/img/factoring_logo_light.png" th:src="@{/img/factoring_logo_light.png}">
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarGlobal"
                        aria-controls="navbarGlobal" aria-expanded="false"
                        aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="navbar-collapse collapse" id="navbarGlobal" style="margin-top: -18px;">
                    <div>
                        <a href="credit" class="menu-item">授信申请</a>
                        <a href="withdraw" class="menu-item">提款申请</a>
                        <a href="repayment" class="menu-item">我的还款</a>
                        <a href="usercenter" class="menu-item">用户中心</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    <main class="profile-page" style="flex: 1 0 auto;">
        <section class="section-profile-cover section-shaped my-0">
            <div class="shape shape-style-1 shape-primary shape-skew alpha-4">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>
        </section>
        <section class="section section-skew" style="margin-top:-200px;">
            <div class="container">
                <div class="card card-profile shadow mt--300">
                    <div class="px-4">
                        <div class="row justify-content-center">
                            <div class="col-lg-3 order-lg-2">
                                <div class="text-muted text-center mb-2" style="padding-top: 20px;">
                                    <big>我的还款</big>
                                </div>
                            </div>
                        </div>
                        <div class="mt-2 py-5 border-top text-center">
                            <div class="container-div">
                                <div class="row justify-content-center">
                                    <div class="col-sm-12 select-table ">
                                        <table id="bootstrap-table"
                                               data-mobile-responsive="true"></table>
                                    </div>
                                </div>
                            </div>
                            <br/>
                            <span style="">当前所示的状态、数据等展示仅供参考，不作为双方是否开展保理融资业务的依据，双方的权利义务以最终签署合同为准</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <div th:replace="fragment/footer :: footer"></div>
</div>
<!--</div>-->
<script type="application/javascript">

    $(function () {
        $.ajax({
            url: "/credit/selectSuccessByBillId",
            type: "POST"
        });

        var options = {
            url: "/withdraw/listBySupplierId",
            showSearch: false,
            showRefresh: false,
            showToggle: false,
            showColumns: false,
            pagination: false,
            height: "400",
            sidePagination: "server",
            columns: [
                {
                    field: 'id',
                    title: '还款编号',
                    align: 'center'
                },
                {
                    field: 'amount',
                    title: '还款金额',
                    align: 'center',
                    formatter: function (value) {
                        return formatMoney(value, 2);
                    }
                },
                {
                    field: 'period',
                    title: '还款期限（月）',
                    align: 'center'
                },
                {
                    field: 'repaymentNumber',
                    title: '还款账号',
                    align: 'center'
                },
                {
                    field: 'accountNumber',
                    title: '收款账号',
                    align: 'center'
                },
                /*{
                 field: 'status',
                 title: '状态',
                 align: 'center'
                 },*/
                {
                    field: 'creditStatus',
                    title: '操作',
                    align: 'center',
                    formatter: function (value, row, index) {
                        return '<button class="btn btn-sm btn-primary" type="button" onclick = "details(\'' + row.id + '\');" style="font-size: 0.87rem">查看详情</button><button class="btn btn-sm btn-danger" type="button" onclick = "newplay(\'' + row.id + '\');" style="font-size: 0.87rem">还款计划</button><button class="btn btn-sm btn-default" type="button" onclick = "newcord(\'' + row.id + '\');" style="font-size: 0.87rem">还款记录</button>';
//                        return '<button class="btn btn-sm btn-danger" type="button" onclick = "newplay(\'' + row.id + '\');" style="font-size: 0.87rem">还款计划</button>';
                    }
                }]
        };
        $.table.init(options);
    });


    function newcord(id) {
        //iframe窗
        layer.open({
            type: 2,
            title: '还款记录',
            shadeClose: true,
            shade: [0.8, '#393D49'],
            maxmin: true, //开启最大化最小化按钮
            area: ['80%', '90%'],
            content: '/system/repayRecord/repaycord?id=' + id,
            shadeClose: false
        });
    }

    function details(id) {
        layer.open({
            type: 2,
            title: ' ',
//            shadeClose: true,
            shade: [0.8, '#393D49'],
            maxmin: true, //开启最大化最小化按钮
            area: ['80%', '90%'],
            content: '/withdraw/repaydetails?id=' + id,
            shadeClose: false,
            btn: ["关闭"],
            yes: function (index) {
                layer.close(index);
            }
        });
    }

    function newplay(id) {
        //iframe窗
        layer.open({
            type: 2,
            title: '还款计划',
            shadeClose: true,
            shade: [0.8, '#393D49'],
            maxmin: true, //开启最大化最小化按钮
            area: ['80%', '90%'],
            content: '/system/repayPlan/repayplay?id=' + id,
            shadeClose: false
        });
    }
</script>
</body>

</html>